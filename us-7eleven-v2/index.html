<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Rewards • Choose Your Device</title>
<style>
  :root{--bg:#0b1220;--panel:#121a2b;--ink:#e6f0ff;--mut:#9fb0c9;--ring:0 0 0 2px rgba(74,163,255,.25),0 10px 40px rgba(0,0,0,.35)}
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:
    radial-gradient(1200px 600px at 80% -10%, #163154 0%, transparent 60%),
    radial-gradient(900px 500px at -10% 110%, #112844 0%, transparent 60%),var(--bg);
    color:var(--ink);font:500 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto}
  .wrap{max-width:920px;margin:24px auto;padding:18px}
  .card{background:linear-gradient(#121a2b,#0e1728);border:1px solid #1c2742;border-radius:18px;box-shadow:var(--ring);padding:18px}
  h1{margin:0 0 6px;font-weight:800;font-size:clamp(24px,4vw,34px)} .sub{margin:0 0 12px;color:var(--mut)}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}@media(max-width:800px){.grid{grid-template-columns:1fr}}
  .tile{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border:1px solid rgba(148,163,184,.2);background:rgba(255,255,255,.03);border-radius:14px;padding:12px;cursor:pointer}
  .phone{width:80px;aspect-ratio:9/19.5;border-radius:18px;background:linear-gradient(145deg,#111827,#0b1220 50%,#0f1a2d);border:2px solid #22314d;box-shadow:inset 0 0 0 6px #0a1323,0 10px 36px rgba(0,0,0,.55);display:grid;place-items:center;color:#9fd6ff;font-weight:700}
  .btn{appearance:none;border:1px solid rgba(148,163,184,.18);background:linear-gradient(#bfe1ff,#8cc8ff);color:#071020;font-weight:800;border-radius:10px;padding:10px 14px;cursor:pointer}
  .btn.secondary{background:transparent;color:var(--ink)}
  .center{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
  .hide{display:none}
  /* Wheel */
  .wheelBox{display:grid;place-items:center;gap:10px}
  .pointer{width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:16px solid #ffd86b;filter:drop-shadow(0 6px 10px rgba(0,0,0,.3))}
  .wheel{width:min(340px,80vw);aspect-ratio:1;border-radius:50%;border:10px solid #0d1628;display:grid;place-items:center;
         background:conic-gradient(#7dd3fc 0 60deg,#a78bfa 60deg 120deg,#60a5fa 120deg 180deg,#22d3ee 180deg 240deg,#f59e0b 240deg 300deg,#f87171 300deg 360deg)}
  .hub{position:absolute;inset:50% auto auto 50%;transform:translate(-50%,-50%);width:34%;aspect-ratio:1;border-radius:50%;
       background:#0b1220;border:6px solid #111b2d;color:#9cc9ff;font-weight:900;display:grid;place-items:center;text-align:center}
  .result{display:none;font-weight:800;color:#c1f0d0} .result.show{display:block} .btn[disabled]{opacity:.6;cursor:not-allowed}
  .badge{position:fixed;right:10px;bottom:10px;background:#121a2b;color:#a7f3d0;border:1px solid rgba(125,211,252,.25);border-radius:10px;padding:6px 10px;font:700 12px/1 system-ui}
</style>
</head>
<body>
<div class="wrap">

  <!-- A) PRE-LANDING -->
  <section id="choose" class="card">
    <h1>Choose your device</h1>
    <p class="sub">Pick your reward, then spin to unlock. If the first tab is blocked, we’ll auto-retry safe fallbacks.</p>
    <div class="grid">
      <div class="tile" data-device="iphone">
        <div class="phone">iPhone 17</div>
        <div><b>iPhone 17 Reward</b><div class="sub">Premium Apple-style flow.</div>
          <div class="center" style="margin-top:6px"><button class="btn selectBtn">Select iPhone 17</button></div>
        </div>
      </div>
      <div class="tile" data-device="android">
        <div class="phone">Android</div>
        <div><b>Android Flagship Reward</b><div class="sub">Top-tier Android appeal.</div>
          <div class="center" style="margin-top:6px"><button class="btn selectBtn">Select Android</button></div>
        </div>
      </div>
    </div>
  </section>

  <!-- B) SPIN -->
  <section id="spin" class="card hide" aria-live="polite">
    <h1 id="title">Unlock your <span style="background:linear-gradient(90deg,#4aa3ff,#22d3ee);-webkit-background-clip:text;background-clip:text;color:transparent">iPhone 17</span> Reward</h1>
    <p class="sub" id="sub">Spin once to reveal today’s best offer. After unlocking, press Continue.</p>

    <div class="wheelBox">
      <div class="pointer"></div>
      <div class="wheel" id="wheel" style="position:relative"><div class="hub"><small>Tap to</small><div>SPIN</div></div></div>
      <div class="result" id="result">Unlocked!</div>
      <div class="center">
        <button class="btn" id="continue" disabled>Continue to Claim</button>
        <button class="btn secondary" id="again">Try Again</button>
        <button class="btn secondary" id="back">← Change Device</button>
      </div>
      <p class="sub" style="text-align:center">We’ll retry with trusted fallbacks if the first tab is blocked.</p>
    </div>
  </section>

</div>
<div class="badge">v2-lite • 11 Oct</div>

<script>
/* --------- EDIT THESE LINKS --------- */
const LINKS = {
  iphone: {
    primary: "https://www.effectivegatecpm.com/qng7ic9mmn?key=7aafa190a2f78bc6cb6fd084e1fa9c4c",
    fallback: [
      "https://smartlink.monetag.com/MONETAG_SMARTLINK_IPHONE", // <-- replace
      "https://ali.ski/OPTIONAL_IPHONE"
    ]
  },
  android: {
    primary: "https://www.effectivegatecpm.com/qng7ic9mmn?key=7aafa190a2f78bc6cb6fd084e1fa9c4c",
    fallback: [
      "https://smartlink.monetag.com/MONETAG_SMARTLINK_ANDROID", // <-- replace
      "https://ali.ski/OPTIONAL_ANDROID"
    ]
  }
};
/* --------- UI & STATE --------- */
let current="iphone", fired=false;
const $=s=>document.querySelector(s), $$=s=>document.querySelectorAll(s);
const choose=$("#choose"), spin=$("#spin"), title=$("#title"), sub=$("#sub");
const wheel=$("#wheel"), result=$("#result"), go=$("#continue"), again=$("#again"), back=$("#back");
$$(".selectBtn").forEach(b=>b.addEventListener("click",e=>{
  current=e.target.closest(".tile").dataset.device; setHeaders();
  choose.classList.add("hide"); spin.classList.remove("hide");
  setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),50);
  setTimeout(spinWheel,350);
}));
back.addEventListener("click",()=>{ spin.classList.add("hide"); choose.classList.remove("hide"); reset(); });
function setHeaders(){ const name=current==="iphone"?"iPhone 17":"Android Flagship";
  title.innerHTML=`Unlock your <span style="background:linear-gradient(90deg,#4aa3ff,#22d3ee);-webkit-background-clip:text;background-clip:text;color:transparent">${name}</span> Reward`;
  sub.textContent="Spin once to reveal today’s best offer. After unlocking, press Continue.";
  result.textContent=`Unlocked: ${name} Reward ✔`; }
/* --------- SPIN --------- */
function spinWheel(){ if(wheel.classList.contains("spinning"))return;
  wheel.classList.add("spinning"); result.classList.remove("show"); go.disabled=true;
  const turns=Math.floor(Math.random()*3)+3, seg=Math.floor(Math.random()*6);
  const end=360*turns + (seg*60 + 30 + (Math.random()*10-5));
  wheel.style.transition="transform 2.1s cubic-bezier(.08,.82,.17,1)";
  wheel.style.transform=`rotate(${end}deg)`;
  wheel.addEventListener("transitionend",()=>{ wheel.classList.remove("spinning"); result.classList.add("show"); go.disabled=false; },{once:true});
}
wheel.addEventListener("click",spinWheel);
wheel.tabIndex=0; wheel.addEventListener("keydown",e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();spinWheel();}});
again.addEventListener("click",spinWheel);
function reset(){ result.classList.remove("show"); go.disabled=true; fired=false; wheel.style.transition="none"; wheel.style.transform="rotate(0deg)"; void wheel.offsetWidth; wheel.style.transition=""; }
/* --------- OPEN WITH FALLBACKS --------- */
function tryOpen(u){ try{const w=window.open(u,"_blank","noopener,noreferrer"); return !!w;}catch(e){return false;} }
function openWithFallback(){ if(fired) return; fired=true;
  const set=LINKS[current]; if(tryOpen(set.primary))return;
  let i=0; const tick=()=>{ if(i>=set.fallback.length) return; if(!tryOpen(set.fallback[i++])) setTimeout(tick,350); };
  setTimeout(tick,300);
}
go.addEventListener("click",openWithFallback);
</script>
</body>
</html>
             
