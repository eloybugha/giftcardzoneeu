<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Redirecting...</title>
  <meta name="robots" content="noindex, nofollow" />
  <link rel="canonical" href="https://giftcardzoneeu.com/go/global-router/">
  <meta name="description" content="Please wait while we connect you to the best offer for your region." />
  <style>
    body{margin:0;background:#0b0e14;color:#e8eefc;font:500 16px/1.5 system-ui,Segoe UI,Roboto,Arial}
    .wrap{min-height:100vh;display:grid;place-items:center;padding:24px}
    .card{max-width:520px;background:#111623;border:1px solid rgba(255,255,255,.08);
          border-radius:20px;padding:28px;text-align:center}
    h1{margin:0 0 10px;font-size:1.25rem}
    p{margin:0 0 14px;color:#9fb0d1}
    .bar{height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
    .bar>i{display:block;height:100%;width:0;background:linear-gradient(90deg,#2b5cff,#1fdc8b)}
    .txt{font-size:.9rem;color:#6fa8ff;margin-top:10px}
  </style>
</head>
<body>
  <div class="wrap" id="ui">
    <div class="card">
      <h1>Preparing your offer based on your region…</h1>
      <p>This will only take a few seconds.</p>
      <div class="bar" aria-label="Loading"><i id="prog"></i></div>
      <div class="txt" id="notice">Connecting…</div>
    </div>
  </div>

  <script>
  (function(){
    // 1) Destinations (internal paths to avoid 404s)
    const TARGETS = {
      NL: "/country/nl/",
      DE: "/deals/germany/",
      PH: "/country/ph/",
      GLOBAL: "/go/best-offers/"
    };

    // 2) Query params helper
    const qs = new URLSearchParams(location.search);

    // FAST mode: skip UI & delay when ?fast=1 or ?skip_ui=1
    const FAST = qs.has("fast") || qs.get("skip_ui") === "1";

    // 3) Country detection (override via ?country=nl|de|ph|global)
    function detectCountry(){
      const o=(qs.get("country")||"").toLowerCase();
      if (["nl","de","ph","global"].includes(o)) return o.toUpperCase();
      const lang=(navigator.language||"en").toLowerCase();
      if (lang.startsWith("nl")) return "NL";
      if (lang.startsWith("de")) return "DE";
      if (lang.startsWith("fil")||lang.startsWith("tl")||lang.startsWith("en-ph")) return "PH";
      return "GLOBAL";
    }

    // 4) Carry UTM / ids
    function carryParams(url){
      try{
        const u = new URL(url, location.origin);
        for (const [k,v] of qs.entries()){
          if (/^(utm_|gclid|fbclid|ttclid|yclid|ref|source|campaign|adset|adgroup|kw|cf_debug)$/i.test(k)){
            u.searchParams.set(k,v);
          }
        }
        return u.toString();
      }catch(e){ return url; }
    }

    // 5) Compute target
    const cc   = detectCountry();
    const base = TARGETS[cc] || TARGETS.GLOBAL;
    const target = carryParams(base);

    // 6) FAST path — instant redirect (no UI)
    if (FAST) {
      location.replace(target);
      return;
    }

    // 7) Normal UI path — 3s progress
    const bar = document.getElementById("prog");
    const note = document.getElementById("notice");
    let pct=0;
    const iv = setInterval(()=> {
      pct += 6; // ~3s total
      if (bar) bar.style.width = Math.min(pct,100)+"%";
      if (pct >= 100){
        clearInterval(iv);
        location.href = target;
      }
    }, 170);

    if (note) note.textContent = `Detected: ${cc} • Next: ${base}`;
  })();
  </script>
</body>
</html>
