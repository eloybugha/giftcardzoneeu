<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Connecting you to verified offers…</title>
  <meta name="robots" content="noindex, nofollow" />
  <meta name="description" content="Smart routing page. We connect you to verified regional reward partners. Not affiliated with Reddit." />
  <meta property="og:title" content="Connecting you to verified offers…" />
  <meta property="og:description" content="Please wait a moment while we check available offers for your region." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <style>
    :root{
      --bg:#0b0e14;--card:#111623;--text:#e8eefc;--muted:#9fb0d1;--ring:#2b5cff;
      --radius:18px;--shadow:0 6px 24px rgba(0,0,0,.25)
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:500 16px/1.6 system-ui,Segoe UI,Roboto,Arial}
    .wrap{min-height:100svh;display:grid;place-items:center;padding:28px}
    .card{width:min(560px,92vw);background:var(--card);border:1px solid rgba(255,255,255,.08);
          border-radius:var(--radius);padding:28px;box-shadow:var(--shadow);text-align:center}
    h1{margin:.2rem 0 0.5rem;font-size:1.25rem}
    p{margin:.25rem 0;color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center;justify-content:center;flex-wrap:wrap;margin-top:8px}
    .dot{width:10px;height:10px;border-radius:999px;background:var(--ring);opacity:.8;animation:blink 1.4s infinite}
    .dot:nth-child(2){animation-delay:.15s}.dot:nth-child(3){animation-delay:.3s}
    @keyframes blink{0%,100%{opacity:.25}50%{opacity:1}}
    .bar{height:10px;background:#0e1530;border-radius:999px;overflow:hidden;margin:16px 0 8px;border:1px solid rgba(255,255,255,.06)}
    .bar>i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#2b5cff,#6ea8ff);border-radius:inherit;transition:width .3s ease}
    .btn{display:inline-block;margin-top:10px;padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
         color:var(--text);text-decoration:none}
    small{display:block;margin-top:12px;color:#7f93ba;font-size:12px}
    code{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;color:#cfe1ff}
    .sr{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="wrap">
    <main class="card" role="main" aria-busy="true" aria-live="polite">
      <div class="row" aria-hidden="true">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      </div>
      <h1>Checking available offers for your region…</h1>
      <p>We use smart routing to connect you to a verified partner. This usually takes ~3 seconds.</p>

      <div class="bar" aria-hidden="true"><i id="prog"></i></div>
      <p id="status" class="sr">Routing in progress</p>

      <a id="fallback" class="btn" href="/go/global-router/?fast=1&v=12">Open directly</a>
      <small>
        This page is informational and performs a single redirect to a partner page. Not affiliated with Reddit.<br>
        If you are not redirected, use the button above. JS disabled? See: <code>/go/global-router/</code>.
      </small>

      <noscript>
        <p><strong>JavaScript is disabled.</strong> Please use the direct link:
          <a class="btn" href="/go/global-router/?fast=1&v=12">Continue</a>
        </p>
      </noscript>
    </main>
  </div>

  <script>
    (function(){
      // --- CONFIG -----------------------------------------------------------
      // Default destination (your existing smart router).
      const DEFAULT_DEST = "/go/global-router/?fast=1&v=12";

      // Optional: allow ?to= to override (only from your domain for safety).
      // Example: /go/reddit-router/?to=/go/fiverr-credits/
      const qs = new URLSearchParams(location.search);
      let target = qs.get("to");
      try {
        if (target && !target.startsWith("/")) target = null; // relative-only allowlist
      } catch(e){ target = null; }

      // Carry through UTM & Reddit params (helps analytics + approvals)
      const passthroughParams = ["utm_source","utm_medium","utm_campaign","utm_content","utm_term","rdt_cid","rdt_id"];
      const extra = [];
      for (const k of passthroughParams) {
        if (qs.has(k)) extra.push(`${encodeURIComponent(k)}=${encodeURIComponent(qs.get(k) || "")}`);
      }

      // Debug toggle ?debug=1 (keeps delay but logs)
      const debug = qs.get("debug") === "1";

      // Delay (Reddit reviewers dislike instant 0s redirects)
      const DELAY_MS = 3000; // 3 seconds

      // Final URL assembly
      function buildUrl(base){
        if (!extra.length) return base;
        const j = base.includes("?") ? "&" : "?";
        return base + j + extra.join("&");
      }
      const destination = buildUrl(target || DEFAULT_DEST);

      // --- PROGRESS BAR + ACCESSIBILITY ------------------------------------
      const bar = document.getElementById("prog");
      const status = document.getElementById("status");
      const fallback = document.getElementById("fallback");
      fallback.href = destination;

      const start = performance.now();
      const tick = () => {
        const elapsed = performance.now() - start;
        const pct = Math.min(100, Math.round((elapsed / DELAY_MS) * 100));
        bar.style.width = pct + "%";
        if (pct === 100) status.textContent = "Redirecting now";
        if (elapsed < DELAY_MS) requestAnimationFrame(tick);
      };
      requestAnimationFrame(tick);

      // --- GA4 (optional): fire an event so alam natin na na-view ang router
      // Add your GA4 gtag.js globally; this just emits a custom event if gtag exists.
      function ga4Event(name, params){
        try { if (typeof gtag === "function") gtag("event", name, params || {}); } catch(e){}
      }
      ga4Event("router_view", { page: "reddit-router", dest: destination });

      // --- REDIRECT ---------------------------------------------------------
      setTimeout(function(){
        ga4Event("router_redirect", { dest: destination });
        if (debug) console.log("Redirecting to:", destination);
        location.replace(destination);
      }, DELAY_MS);

      // Safety: if something blocks replace(), enable manual click CTA
      setTimeout(function(){
        document.querySelector(".btn")?.classList.add("pulse");
      }, DELAY_MS + 2500);
    })();
  </script>
</body>
</html>

