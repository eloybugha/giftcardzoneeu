<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üéÅ Unlock Your Reward</title>
<meta name="theme-color" content="#0b0f19" />
<style>
  :root{--bg:#0b0f19;--card:#111827;--txt:#f8fafc;--muted:#94a3b8;--accent:#facc15;--accent2:#fde047;}
  *{box-sizing:border-box;margin:0;padding:0}
  body{min-height:100vh;display:grid;place-items:center;background:radial-gradient(1200px 600px at 70% -20%,#1f2937 0%,#0b0f19 48%,#0b0f19 100%);color:var(--txt);font:500 16px/1.6 system-ui,-apple-system,Segoe UI,Roboto;padding:24px}
  .card{width:100%;max-width:440px;background:rgba(17,24,39,.9);border:1px solid rgba(255,255,255,.08);border-radius:20px;padding:22px;box-shadow:0 10px 40px rgba(0,0,0,.45);text-align:center}
  h1{font-size:22px;margin-bottom:6px}
  p{color:var(--muted);margin-bottom:16px}
  button{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#111;font-weight:700;border:0;border-radius:12px;padding:14px 22px;font-size:16px;cursor:pointer}
  .hint{font-size:13px;color:#9aa8c7;margin-top:10px}
</style>
</head>
<body>
  <div class="card">
    <h1>üéâ Almost there!</h1>
    <p>Press the button once to reveal your reward.</p>
    <button id="go">Unlock Reward</button>
    <div class="hint">If nothing opens, tap again or allow popups for this site.</div>
  </div>

<script>
/* ====== CONFIG (PALITAN ITO) ====== */
const ADSTERRA = "https://www.effectivegatecpm.com/b3tf3q5h?key=d30075f9a8298d2e723defde10af4e33";
const MONETAG  = "https://otieu.com/4/4203960";
/* ================================== */

/* One-open per user per 10 minutes (para iwas loop + invalid) */
const COOL_MINUTES = 10;
const COOLDOWN_KEY = "pop_cooldown_ts_v3";

const btn = document.getElementById("go");
let fired = false;

function onCooldown(){
  try{
    const ts = +localStorage.getItem(COOLDOWN_KEY) || 0;
    return Date.now() - ts < COOL_MINUTES*60*1000;
  }catch(e){ return false; }
}
function setCooldown(){
  try{ localStorage.setItem(COOLDOWN_KEY, String(Date.now())); }catch(e){}
}

/* Subtle human signals to boost ‚Äúvalidity‚Äù (scroll + idle) */
let hasScrolled = false;
window.addEventListener("scroll", ()=>{ hasScrolled = true; }, {once:true, passive:true});

/* Core opener with graceful fallbacks */
function tryOpen(url){
  try{
    const w = window.open(url, "_blank", "noopener,noreferrer");
    return !!w;
  }catch(e){ return false; }
}

/* Last-resort same-tab open (Monetag direct link) */
function sameTab(url){
  try{ window.location.href = url; }catch(e){}
}

function fireOnce(){
  if (fired) return;
  fired = true;

  // block repeats
  if (onCooldown()){
    // if cooldown, do nothing heavy; just hint a click did something
    return;
  }

  // Step 1: attempt Adsterra in new tab (user gesture)
  let ok = tryOpen(ADSTERRA);

  // Step 2: if blocked, retry quickly, then fallback to Monetag
  if(!ok){
    setTimeout(()=>{
      ok = tryOpen(ADSTERRA);
      if(!ok){
        // Step 3: try Monetag in new tab
        let fb = tryOpen(MONETAG);
        if(!fb){
          // Step 4: last resort same-tab redirect to Monetag (usually counted)
          sameTab(MONETAG);
        }
      }
    }, 250);
  }

  // mark cooldown
  setCooldown();
}

/* Bind to multiple real user gestures (better pass rate) */
["click","pointerup","keydown"].forEach(ev=>{
  btn.addEventListener(ev, fireOnce, {once:true});
});

/* Passive auto-assist: after 8s idle + slight scroll, trigger programmatically
   (maraming browser ang papayag dahil may prior interaction) */
let idleTimer = setTimeout(()=>{
  if(!fired && (hasScrolled || document.visibilityState==="visible")){
    btn.click();
  }
}, 8000);

/* Back/forward cache safety: reset UI but respect cooldown */
window.addEventListener("pageshow", (e)=>{ if(e.persisted){ fired = onCooldown(); }});
</script>
</body>
</html>
